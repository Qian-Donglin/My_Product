ここでは、「理工展パンフレットアプリ」のクラス設計の簡易な紹介をする。

データベースではGoogle社の**Cloud Fire Store**を使用している。

# Activity構成

まず、Activityは3つ使われており、

- MainActivity
- FistWaitingActivity
- RestartActivity

である。

MainActivityではBottomNavigationBarを持っており、アプリでは基本的にこのActivityを表示している。この際、Fragmentを使っている。

FirstWaitingActivityでは、最初の理工展ロゴのスプラッシュ画面を表示する時間で、Cloud Fire Storeからのデータ取得、ファイル読み取りなどのロードの時間の間に表示されるものである。

RestartActivityは、アプリの再起動に必要なActivityであり、他人のを参考に書いた。実際では初回起動時のアンケートや利用規約同意後に一度再起動するところで使用されている。

# MainActivity内のFragment

MainActivity内のメインの表示Fragmentの中は、**BottomNavigationBarの選択項目によって表示するFragmentが異なる。**それらのFragment(つまりBottomNavigationBarの上の画面)は以下のようなパッケージ名で大別される。

- Top
- Projects
- TimeTable
- Info

## Top

Topでは、画像を一定時間通りにスライドさせて表示させる機能と、4つのボタン、それとお知らせで構成されている。

画像のスライド表示機能は、[外部ライブラリ](https://github.com/therealshabi/AutoImageFlipper)を使用した。(リンク先参照)その中身は、Cloud Fire Storeでロードした画像データを表示させている。外部データベース依存にすることで、データの変更にアップデートを必要としない。

4つのボタンでそれ
- 「バーチャル理工展」の起動
- 「AR矢口くん」の起動
- 今年の理工展の楽しみ方の紹介
- 出展団体の人気ランキングの「理工展No.1」の投票などの情報
である。

お知らせもCloud Fire Storeからロードしたデータをもとに表示させている。

## Projects

今回、すべての企画には「タグ」というものを1~5個振り分けていて、これを利用して便利に検索できるようになっている。具体的な検索方法は以下の通り
- すべての企画
- タグ別に見る
- 履歴で見る
- お気に入りから見る
- ランダムで見る
- 人気な企画を見る

いずれかの方法を選択すると、条件に合致した企画の一覧が表示される。各企画には💛ボタンがあり、押してお気に入りにすることで、「お気に入りから見る」から迅速にアクセスできる。

企画一覧の企画をタップすると、企画詳細画面に遷移する。

企画詳細画面では、企画の情報が与えられている。
この各企画に割り当てられているタグをタップするとことで、「タグ別に見る」と同様に同じタグの企画一覧画面に飛ぶ。
また、**「バーチャル理工展」アプリでは、バーチャル世界の西早稲田キャンパスの一部の教室内で、企画が展示されている**のに対応して、企画詳細画面でのバーチャル理工展ボタンから、「バーチャル理工展」内のその企画の展示がある教室に直接飛ぶことができる。(「バーチャル理工展」はUnityで開発されており、ここではDeepLinkという技術を使用した)
他にも様々なSNSで拡散や団体のSNSにアクセスなどの機能もある。

## TimeTable

タイムテーブルでは本来、[Moyuru Aizawaさんのライブラリ](https://github.com/MoyuruAizawa/TimetableLayout)を使用しようとしたが、時間不足によりWebページでのタイムテーブル(理工展の時間外は閲覧できない)へのリンクという妥協案にとどまった。

## Info

理工展連絡会の各種公式サイトやSNSへのリンク、利用規約やプライバシーポリシー、バージョン確認などの機能がある。

# SharingMaterial

複数のFragment間で使用しうるモジュールを置く、SharingMaterialパッケージが存在する。その中では
- 簡単なダイヤログを表示するためのDialogFragmentを作り置き、それを便利に利用するための関数
- ランダムにいくつかを選択する、などのアルゴリズム
- 他のアプリ起動のためのIntent
- ユーザー1人1人の情報を保持するクラス
- Cloud Fire Storeからロードしたデータを保持するクラス

などが含まれている。

以上